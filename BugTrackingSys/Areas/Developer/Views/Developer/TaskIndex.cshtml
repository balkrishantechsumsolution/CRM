@model BugTrackingSys.Areas.Developer.Models.UsersRolesViewModel;
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Antiforgery
@{
    ViewData["Title"] = "Add Task Page";
    Layout = "~/Areas/Developer/Views/Shared/_Layout.cshtml";
    var requestToken = Antiforgery.GetAndStoreTokens(Context).RequestToken;
}

<style>
    .sFont {
        color: goldenrod;
        font-weight: bold;
    }

    .split {
        height: 100% !important;
        overflow: unset !important;
    }
</style>

<link href="https://unpkg.com/tailwindcss@1.0/dist/tailwind.min.css" rel="stylesheet" />
<div class="PageCLSFRM logo">
    <div class="mx-2 grid grid-cols-3 gap-2  bg-green-600 rounded-lg">
        <h1 class="display-4  sFont text-center">Add Task</h1>
    </div>
    <br />
    <br />

    <div class="mx-2 grid grid-cols-3 gap-2  bg-green-600 rounded-lg" style="width: 100%;  height: 420px;  overflow: scroll;">
        <form class="form-horizontal" enctype="multipart/form-data" method="post">
            <section class="main-content">
                <div class="rows" style="min-height: 300px; margin: 0 auto; width: 50%">
                    <div class="col-lg-12">

                        <div class="">
                            <div class="resp-tabs-container ver_1">
                                <div style="margin-top: 10px;">
                                    <div>
                                        <div class="rows">
                                            <div id="divElement">
                                                <div class="box-body box-body-open">
                                                    <br><br>
                                                    <div class="form-group">
                                                        <label class="display-7  sFont text-center control-label">
                                                            Task Name
                                                        </label>
                                                        <input type="text" asp-for="@Model.tasks.TaskName" class="form-control">
                                                        <span asp-validation-for="@Model.tasks.TaskName" class="text-danger"></span>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="display-7  sFont text-center control-label">
                                                            Project Name
                                                        </label>
                                                        <select name="project.Id" asp-for="@Model.project.id" class="form-control" asp-items="@Model.ProjectList"></select>
                                                        <span asp-validation-for="@Model.project.id" class="text-danger"></span>
                                                    </div>
                                                      <div class="form-group">
                                                        <label class="display-7  sFont text-center control-label">
                                                            Task Start Date
                                                        </label>
                                                        <input type="text" asp-for="@Model.tasks.Startdate" id="txtStartDate" class="form-control">
                                                        <span asp-validation-for="@Model.tasks.Startdate" class="text-danger"></span>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="display-7  sFont text-center control-label">
                                                            Task Completion Date
                                                        </label>
                                                        <input type="text" asp-for="@Model.tasks.Enddate" id="txtEndDate" class="form-control">
                                                        <span asp-validation-for="@Model.tasks.Enddate" class="text-danger"></span>
                                                    </div>

                                                  
                                                    <div class="form-outline" style="margin:0;width: 700px;">
                                                        <label class="display-7  sFont text-center control-label">
                                                            Task Description
                                                        </label>
                                                        <div>
                                                            <textarea class="form-control" asp-for="@Model.tasks.TaskDescrpition" id="project_Description"></textarea>
                                                            <span  class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="display-7  sFont text-center control-label">
                                                            Task assignment Name
                                                        </label>
                                                        <select name="tasks.TaskAssignee" asp-for="@Model.tasks.TaskAssignee" class="form-control" asp-items="@Model.AssigneeMainList"></select>
                                                        <span asp-validation-for="@Model.tasks.TaskAssignee" class="text-danger"></span>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="display-7  sFont text-center control-label">
                                                            Task Priority
                                                        </label>
                                                        <select name="tasks.PrioritySet" asp-for="@Model.tasks.PrioritySet" class="form-control" asp-items="@Model.PriorityList" class="form-control"></select>
                                                        <span asp-validation-for="@Model.tasks.PrioritySet" class="text-danger"></span>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="display-7  sFont text-center control-label">
                                                            Task Status
                                                        </label>
                                                        <select name="tasks.TaskStatus" asp-for="@Model.tasks.TaskStatus" class="form-control" asp-items="@Model.TaskList" class="form-control"></select>
                                                        <span asp-validation-for="@Model.tasks.TaskStatus" class="text-danger"></span>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="display-7  sFont text-center control-label">
                                                            Select Attachment:
                                                        </label>
                                                        <input asp-for="@Model.files" class="btn btn-primary" type="file" multiple>
                                                    </div>
                                                    
                                                    <br />
                                                    <input type="submit" class="btn btn-primary" value="Submit" asp-controller="Developer" asp-action="TaskIndex">
                                                    <br />
                                                    <br />
                                                    <hr />
                                                    
                                                    <table  class="sFont text-center">
                                                        <tr>
                                                            <th style="width:50px">File ID</th>
                                                            <th style="width:120px">File Name</th>
                                                            <th style="width:80px">Download</th>
                                                        </tr>
                                                         @if (Model.fileAttach!=null)
                                                        {
                                                            @if (Model.fileAttach.Count() > 0)
                                                            {
                                                                foreach (var file in Model.fileAttach)
                                                                {
                                                                    <tr>
                                                                        <td>@file.FileID</td>
                                                                        <td>@file.FileName</td>
                                                                        <td><a method="post" asp-route="DownloadFileEntry" asp-route-fileid=@file.FileID style=" color: white;">Download File</a></td>
                                                                    </tr>
                                                                }
                                                            }
                                                        }

                                                    </table>
                                                    <br />
                                                    <br />
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                        <div class="form-group">
                                                            <label class="control-label sFont text-center">
                                                               @Html.Raw(ViewBag.Message)
                                                            </label>
                                                        </div>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
            </section>

            <input asp-for="@Model.tasks.id" type="hidden" value="0" />
            <input asp-for="@Model.tasks.TaskId" type="hidden" value="0" />
          
          
        </form>
    </div>
</div>
@section Scripts{
    <script>
        tinymce.init({ selector: "#project_Description" });
    </script>
    <script src="~/jquery-ui-1.13.2/jquery-ui.js"></script>
    <link href="~/jquery-ui-1.13.2/jquery-ui.css" rel="stylesheet" />
    <link href="~/jquery-ui-1.13.2/jquery-ui.min.css" rel="stylesheet" />
    <link href="~/jquery-ui-1.13.2/jquery-ui.structure.css" rel="stylesheet" />
    <link href="~/jquery-ui-1.13.2/jquery-ui.structure.min.css" rel="stylesheet" />
    <link href="~/jquery-ui-1.13.2/jquery-ui.theme.css" rel="stylesheet" />
    <link href="~/jquery-ui-1.13.2/jquery-ui.theme.min.css" rel="stylesheet" />
    <script>
        $(function () {
            $('#txtStartDate').datepicker({
                dateFormat: "dd/mm/yy",
                yearRange: '2010:2019',
                changeMonth: true,
                changeYear: true,
                maxDate: '0',
                yearRange: "-150:+0",
                onSelect: function (date) {

                    //GetValidateImmunizationDate();
                }
            });
            $('#txtStartDate').datepicker('setDate', 'today');

            $('#txtEndDate').datepicker({
                dateFormat: "dd/mm/yy",
                yearRange: '2010:2019',
                changeMonth: true,
                changeYear: true,
                maxDate: '0',
                yearRange: "-150:+0",
                onSelect: function (date) {

                    //GetValidateImmunizationDate();
                }
                
            });

            $('#txtEndDate').datepicker('setDate', 'today');
        });
    </script>
}


   